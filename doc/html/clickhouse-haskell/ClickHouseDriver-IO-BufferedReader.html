<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ClickHouseDriver.IO.BufferedReader</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/ClickHouseDriver.IO.BufferedReader.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">clickhouse-haskell-0.1.0.0: Clickhouse client in Haskell</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">ClickHouseDriver.IO.BufferedReader</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Tools to analyze protocol and deserialize data sent from server. This module is for internal use only.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:readBinaryStrWithLength">readBinaryStrWithLength</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:readVarInt-39-">readVarInt'</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/Data-Word.html#t:Word" title="Data.Word">Word</a>, <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a>)</li><li class="src short"><a href="#v:readBinaryStr-39-">readBinaryStr'</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a>)</li><li class="src short"><a href="#v:readBinaryStr">readBinaryStr</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:readVarInt">readVarInt</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word" title="Data.Word">Word</a></li><li class="src short"><a href="#v:readBinaryInt8">readBinaryInt8</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int8" title="Data.Int">Int8</a></li><li class="src short"><a href="#v:readBinaryInt16">readBinaryInt16</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int16" title="Data.Int">Int16</a></li><li class="src short"><a href="#v:readBinaryInt64">readBinaryInt64</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:readBinaryInt32">readBinaryInt32</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int32" title="Data.Int">Int32</a></li><li class="src short"><a href="#v:readBinaryUInt8">readBinaryUInt8</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:readBinaryUInt128">readBinaryUInt128</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../data-dword-0.3.1.3/Data-DoubleWord.html#t:Word128" title="Data.DoubleWord">Word128</a></li><li class="src short"><a href="#v:readBinaryUInt64">readBinaryUInt64</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li><li class="src short"><a href="#v:readBinaryUInt32">readBinaryUInt32</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a></li><li class="src short"><a href="#v:readBinaryUInt16">readBinaryUInt16</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word16" title="Data.Word">Word16</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Reader">Reader</a> a = <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Buffer">Buffer</a> = <a href="#v:Buffer">Buffer</a> {<ul class="subs"><li><a href="#v:bufSize">bufSize</a> :: !<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li><a href="#v:bytesData">bytesData</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li><a href="#v:socket">socket</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../network-2.8.0.1/Network-Socket.html#t:Socket" title="Network.Socket">Socket</a></li></ul>}</li><li class="src short"><a href="#v:createBuffer">createBuffer</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../network-2.8.0.1/Network-Socket.html#t:Socket" title="Network.Socket">Socket</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a></li><li class="src short"><a href="#v:refill">refill</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:readBinaryStrWithLength" class="def">readBinaryStrWithLength</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryStrWithLength" class="link">Source</a> <a href="#v:readBinaryStrWithLength" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readVarInt-39-" class="def">readVarInt'</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readVarInt%27" class="link">Source</a> <a href="#v:readVarInt-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a></td><td class="doc"><p>buffer to be read</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/Data-Word.html#t:Word" title="Data.Word">Word</a>, <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a>)</td><td class="doc"><p>(the word read from buffer, the buffer after reading)</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:readBinaryStr-39-" class="def">readBinaryStr'</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryStr%27" class="link">Source</a> <a href="#v:readBinaryStr-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a></td><td class="doc"><p>Buffer to be read</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>, <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a>)</td><td class="doc"><p>(the string read from Buffer, the buffer after reading)</p></td></tr></table></div><div class="doc"><p>read binary string from buffer.
 It first read the integer(n) in front of the desired string,
 then it read n bytes to capture the whole string.</p></div></div><div class="top"><p class="src"><a id="v:readBinaryStr" class="def">readBinaryStr</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryStr" class="link">Source</a> <a href="#v:readBinaryStr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readVarInt" class="def">readVarInt</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word" title="Data.Word">Word</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readVarInt" class="link">Source</a> <a href="#v:readVarInt" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryInt8" class="def">readBinaryInt8</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int8" title="Data.Int">Int8</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryInt8" class="link">Source</a> <a href="#v:readBinaryInt8" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryInt16" class="def">readBinaryInt16</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int16" title="Data.Int">Int16</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryInt16" class="link">Source</a> <a href="#v:readBinaryInt16" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryInt64" class="def">readBinaryInt64</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryInt64" class="link">Source</a> <a href="#v:readBinaryInt64" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryInt32" class="def">readBinaryInt32</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int32" title="Data.Int">Int32</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryInt32" class="link">Source</a> <a href="#v:readBinaryInt32" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryUInt8" class="def">readBinaryUInt8</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryUInt8" class="link">Source</a> <a href="#v:readBinaryUInt8" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryUInt128" class="def">readBinaryUInt128</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../data-dword-0.3.1.3/Data-DoubleWord.html#t:Word128" title="Data.DoubleWord">Word128</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryUInt128" class="link">Source</a> <a href="#v:readBinaryUInt128" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryUInt64" class="def">readBinaryUInt64</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryUInt64" class="link">Source</a> <a href="#v:readBinaryUInt64" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryUInt32" class="def">readBinaryUInt32</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryUInt32" class="link">Source</a> <a href="#v:readBinaryUInt32" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBinaryUInt16" class="def">readBinaryUInt16</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Reader" title="ClickHouseDriver.IO.BufferedReader">Reader</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word16" title="Data.Word">Word16</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#readBinaryUInt16" class="link">Source</a> <a href="#v:readBinaryUInt16" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Reader" class="def">Reader</a> a = <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/ClickHouseDriver.IO.BufferedReader.html#Reader" class="link">Source</a> <a href="#t:Reader" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Buffer" class="def">Buffer</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#Buffer" class="link">Source</a> <a href="#t:Buffer" class="selflink">#</a></p><div class="doc"><p>Buffer is for receiving data from TCP stream. Whenever all bytes are read, it automatically
 refill from the stream.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Buffer" class="def">Buffer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:bufSize" class="def">bufSize</a> :: !<a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:bytesData" class="def">bytesData</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:socket" class="def">socket</a> :: <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="../network-2.8.0.1/Network-Socket.html#t:Socket" title="Network.Socket">Socket</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:createBuffer" class="def">createBuffer</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../network-2.8.0.1/Network-Socket.html#t:Socket" title="Network.Socket">Socket</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#createBuffer" class="link">Source</a> <a href="#v:createBuffer" class="selflink">#</a></p><div class="doc"><p>create buffer with size and socket.</p></div></div><div class="top"><p class="src"><a id="v:refill" class="def">refill</a> :: <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="ClickHouseDriver-IO-BufferedReader.html#t:Buffer" title="ClickHouseDriver.IO.BufferedReader">Buffer</a> <a href="src/ClickHouseDriver.IO.BufferedReader.html#refill" class="link">Source</a> <a href="#v:refill" class="selflink">#</a></p><div class="doc"><p>refill buffer from stream</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>